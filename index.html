<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>

<body style="text-align:center;font-family:sans-serif">

<h2>Cloudmall Dictionary Payment Test</h2>

<button onclick="login()">Login Pi</button>
<br><br>
<button onclick="pay()">Test Payment</button>

<script>
Pi.init({ version: "2.0", sandbox: true });

async function login(){
await Pi.authenticate(['payments'], function(){});
alert("login ok");
}

async function pay(){
Pi.createPayment(
{
amount: 0.01,
memo: "Cloudmall Test",
metadata: { type:"test" }
},
{
onReadyForServerApproval: function(paymentId){
console.log(paymentId);
},
onReadyForServerCompletion: function(paymentId, txid){
console.log(txid);
},
onCancel: function(paymentId){
alert("cancelled");
},
onError: function(error, payment){
alert("error");
console.log(error);
}
}
);
}
</script>

</body>
</html>
